# Быстрый старт

## Шаг 1: Запуск сервера

В первом терминале:

```bash
make server
```

Или вручную:

```bash
go run cmd/server/main.go
```

Сервер запустится на `http://localhost:8080` с встроенным WebSocket сервером на `/ws`

## Шаг 2: Запуск клиента

Во втором терминале:

```bash
make client
```

Или вручную:

```bash
go run client/main.go
```

## Решение проблем

### Ошибка: "connection refused" при подключении к WebSocket

**Проблема:** Сервер не запущен или недоступен на порту 8080

**Решение:**
1. Убедитесь, что сервер запущен: `make server`
2. Проверьте, что порт 8080 свободен
3. Проверьте логи сервера

### Ошибка: "port already in use"

**Проблема:** Порт 8080 уже занят

**Решение:**
1. Остановите процесс, использующий порт 8080
2. Или измените порт: `PORT=3000 make server` (Linux/Mac) или `$env:PORT="3000"; make server` (Windows PowerShell)

### Клиент не получает сообщения в реальном времени

**Проблема:** WebSocket соединение не установлено

**Решение:**
1. Убедитесь, что сервер запущен
2. Проверьте URL в клиенте (по умолчанию: `ws://localhost:8080/ws`)
3. Проверьте логи сервера на наличие ошибок WebSocket

### Сообщения отправляются, но не приходят в реальном времени

**Проблема:** WebSocket соединение разорвано

**Решение:**
1. Перезапустите клиент
2. Проверьте логи сервера
3. Убедитесь, что указаны правильные `room_id` и `user_id` при подключении

## Проверка работоспособности

1. **Проверка сервера:**
   ```bash
   curl http://localhost:8080/api/rooms/all
   ```

2. **Тест отправки сообщения:**
   ```bash
   # Сначала получите user_id и room_id через API
   curl -X POST http://localhost:8080/api/messages/send?room_id=ROOM_ID&user_id=USER_ID \
     -H "Content-Type: application/json" \
     -d '{"content": "Test message"}'
   ```

3. **Проверка WebSocket:**
   - Запустите клиент и отправьте сообщение
   - Сообщение должно появиться у всех подключенных клиентов в реальном времени

## Остановка сервисов

```bash
# Остановить сервер и клиент
# Нажмите Ctrl+C в соответствующих терминалах
```

## Использование с несколькими клиентами

1. Запустите сервер: `make server`
2. Откройте несколько терминалов
3. В каждом запустите: `make client`
4. Выберите одну и ту же комнату
5. Отправляйте сообщения из разных клиентов
6. Все сообщения будут видны всем участникам в реальном времени!
